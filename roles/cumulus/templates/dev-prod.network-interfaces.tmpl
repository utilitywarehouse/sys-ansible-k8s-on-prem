# This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).
source /etc/network/interfaces.d/*.intf

# The loopback network interface
auto lo
iface lo inet loopback

# The primary network interface
auto eth0
iface eth0 inet dhcp
    vrf mgmt

auto dev
iface dev
    vrf-table auto

auto mgmt
iface mgmt
    address 127.0.0.1/8
    address ::1/128
    vrf-table auto

#PeerLink Bond interace
auto swp1
iface swp1
    mtu 9216
    link-speed 400000

auto swp2
iface swp2
    mtu 9216
    link-speed 400000

#Link to Merit-Network-VPC
auto swp3
iface swp3
     mtu 9216

#Link to Merit-Network-VPC
auto swp4
iface swp4
     mtu 9216

#PROD - Link to Netapp Controller "A" ( No Bond interface is supported by NetApp)
auto swp5
iface swp5
    alias swp5 prod-netapp-ctrl-a
    bridge-vids 1000
    mtu 9216
    link-autoneg on

#DEV - Link to Netapp Controller "A" ( No Bond interface is supported by NetApp)
auto swp6
iface swp6
    alias swp6 dev-netapp-ctrl-a
    bridge-vids 2000
    mtu 9216

#DEV - Link to Netapp-ld7-kube Controller "A" ( No Bond interface is supported by NetApp)
auto swp9
iface swp9
    alias swp9 dev-netapp-ld7-kube-ctrl-a
    bridge-vids 2000
    mtu 9216

#PROD - Link to Netapp-ld7-kube Controller "A" ( No Bond interface is supported by NetApp)
auto swp10
iface swp10
    alias swp10 prod-netapp-ld7-kube-ctrl-a
    bridge-vids 1000
    mtu 9216

#PROD - Link to Netapp Controller "B" ( No Bond interface is supported by NetApp)
auto swp28
iface swp28
    alias swp28 prod-netapp-ctrl-b
    bridge-vids 1000
    mtu 9216
    link-autoneg on

#DEV - Link to Netapp Controller "B" ( No Bond interface is supported by NetApp)
auto swp29
iface swp29
    alias swp29 dev-netapp-ctrl-b
    bridge-vids 2000
    mtu 9216

#Link to Moonshoot 1 (New one - DEV)
auto swp30
iface swp30
    mtu 9216

#Link to Moonshot 1 (New one - PROD)
auto swp27
iface swp27
    link-down yes
    mtu 9216

#Link to Moonshoot 0 (Old one - DEV)
auto swp31
iface swp31
    mtu 9216

#Link to Moonshoot 2
auto swp32
iface swp32
    mtu 9216

# Link to Moonshot 3
auto swp25
iface swp25
    mtu 9216


# Ports: ILOCZ21010KJH
auto swp11s0
iface swp11s0
    description "To ILOCZ21010KJH"
    mtu 9216

auto swp11s1
iface swp11s1
    description "To ILOCZ21010KJH"
    mtu 9216

# Ports: ILOCZ21010KKK
auto swp11s2
iface swp11s2
    description "To ILOCZ21010KKK"
    mtu 9216

auto swp11s3
iface swp11s3
    description "To ILOCZ21010KKK"
    mtu 9216

# Ports: ILOCZ21010N3V
auto swp12s0
iface swp12s0
    description "To ILOCZ21010N3V"
    mtu 9216

auto swp12s1
iface swp12s1
    description "To ILOCZ21010N3V"
    mtu 9216

# Ports: ILOCZ21010KK8
auto swp12s2
iface swp12s2
    description "To ILOCZ21010KK8"
    mtu 9216

auto swp12s3
iface swp12s3
    description "To ILOCZ21010KK8"
    mtu 9216

# Ports: ILOCZ21010N33
auto swp13s0
iface swp13s0
    description "To ILOCZ21010N33"
    mtu 9216

auto swp13s1
iface swp13s1
    description "To ILOCZ21010N33"
    mtu 9216

# Ports: ILOCZ21010KL3
auto swp13s2
iface swp13s2
    description "To ILOCZ21010KL3"
    mtu 9216

auto swp13s3
iface swp13s3
    description "To ILOCZ21010KL3"
    mtu 9216

# Ports: ILOCZ21010N3X
auto swp14s0
iface swp14s0
    description "To ILOCZ21010N3X"
    mtu 9216

auto swp14s1
iface swp14s1
    description "To ILOCZ21010N3X"
    mtu 9216

# Ports: ILOCZ21010KJD
auto swp14s2
iface swp14s2
    description "To ILOCZ21010KJD"
    mtu 9216

auto swp14s3
iface swp14s3
    description "To ILOCZ21010KJD"
    mtu 9216

# Ports: ILOCZ21010KJM
auto swp15s0
iface swp15s0
    description "To ILOCZ21010KJM"
    mtu 9216

auto swp15s1
iface swp15s1
    description "To ILOCZ21010KJM"
    mtu 9216

# Ports: ILOCZ21010N41
auto swp15s2
iface swp15s2
    description "To ILOCZ21010N41"
    mtu 9216

auto swp15s3
iface swp15s3
    description "To ILOCZ21010N41"
    mtu 9216

# Ports: ILOCZ21010N3Z
auto swp16s0
iface swp16s0
    description "To ILOCZ21010N3Z"
    mtu 9216

auto swp16s1
iface swp16s1
    description "To ILOCZ21010N3Z"
    mtu 9216

# Ports: ILOCZ21010KKQ
auto swp16s2
iface swp16s2
    description "To ILOCZ21010KKQ"
    mtu 9216

auto swp16s3
iface swp16s3
    description "To ILOCZ21010KKQ"
    mtu 9216

# Ports: ILOCZ21010N3R
auto swp17s0
iface swp17s0
    description "To ILOCZ21010N3R"
    mtu 9216

auto swp17s1
iface swp17s1
    description "To ILOCZ21010N3R"
    mtu 9216

# Ports: ILOCZ21010KJQ
auto swp17s2
iface swp17s2
    description "To ILOCZ21010KJQ"
    mtu 9216

auto swp17s3
iface swp17s3
    description "To ILOCZ21010KJQ"
    mtu 9216

# Ports: ILOCZ21010KJ8
auto swp18s0
iface swp18s0
    description "To ILOCZ21010KJ8"
    mtu 9216

auto swp18s1
iface swp18s1
    description "To ILOCZ21010KJ8"
    mtu 9216

# Ports: ILOCZ21010N3W
auto swp18s2
iface swp18s2
    description "To ILOCZ21010N3W"
    mtu 9216

auto swp18s3
iface swp18s3
    description "To ILOCZ21010N3W"
    mtu 9216

# Ports: ILOCZ21010N2X
auto swp19s0
iface swp19s0
    description "To ILOCZ21010N2X"
    mtu 9216

auto swp19s1
iface swp19s1
    description "To ILOCZ21010N2X"
    mtu 9216

# Ports: ILOCZ21010KJN
auto swp19s2
iface swp19s2
    description "To ILOCZ21010KJN"
    mtu 9216

auto swp19s3
iface swp19s3
    description "To ILOCZ21010KJN"
    mtu 9216

#PO to Merit-network-VPC
auto bond-mer-mer
iface bond-mer-mer
    bond-slaves swp3 swp4
    bridge-vids 1 88 89 288 289
    mtu 9216
    clag-id 4

#PO to Moonshoot DEV (new one) - One iface per SW in MLAG
auto bond-hp-m1-dev
iface bond-hp-m1-dev
    bond-slaves swp30
    bridge-vids 188 189
    clag-id 30
    mtu 9216

#PO to Moonshoot PROD (new one) - One iface per SW in MLAG
auto bond-hp-m1-prod
iface bond-hp-m1-prod
    bond-slaves swp27
    bridge-vids 189
    clag-id 27
    mtu 9216

#PO to Moonshoot DEV (Old one) - One iface per SW in MLAG
auto bond-hp-m0-dev
iface bond-hp-m0-dev
    bond-slaves swp31
    bridge-vids 188 189 388 389
    clag-id 31
    mtu 9216

#PO to Moonshoot 2- One iface per SW in MLAG
auto bond-hp-m2-dev
iface bond-hp-m2-dev
    bond-slaves swp32
    bridge-vids 188 189 388 389
    clag-id 32
    mtu 9216

#PO to Moonshoot 3 - One iface per SW in MLAG
auto bond-hp-m3-dev
iface bond-hp-m3-dev
    bond-slaves swp25
    bridge-vids 188 189 388 389
    clag-id 25
    mtu 9216

# PO to - ILOCZ21010KJH - Two Interfaces per SW in MLAG
auto bond-cz21010kjh
iface bond-cz21010kjh
    bond-slaves swp11s0 swp11s1
    bridge-vids 188 189 388 389
    clag-id 40
    mtu 9216

# PO to - ILOCZ21010KKK - Two Interfaces per SW in MLAG
auto bond-cz21010kkk
iface bond-cz21010kkk
    bond-slaves swp11s2 swp11s3
    bridge-vids 188 189 388 389
    clag-id 41
    mtu 9216

# PO to - ILOCZ21010N3V - Two Interfaces per SW in MLAG
auto bond-cz21010n3v
iface bond-cz21010n3v
    bond-slaves swp12s0 swp12s1
    bridge-vids 188 189 388 389
    clag-id 42
    mtu 9216

# PO to - ILOCZ21010KK8 - Two Interfaces per SW in MLAG
auto bond-cz21010kk8
iface bond-cz21010kk8
    bond-slaves swp12s2 swp12s3
    bridge-vids 188 189 388 389
    clag-id 43
    mtu 9216

# PO to - ILOCZ21010N33 - Two Interfaces per SW in MLAG
auto bond-cz21010n33
iface bond-cz21010n33
    bond-slaves swp13s0 swp13s1
    bridge-vids 188 189 388 389
    clag-id 44
    mtu 9216

# PO to - ILOCZ21010KL3 - Two Interfaces per SW in MLAG
auto bond-cz21010kl3
iface bond-cz21010kl3
    bond-slaves swp13s2 swp13s3
    bridge-vids 188 189 388 389
    clag-id 45
    mtu 9216

# PO to - ILOCZ21010N3X - Two Interfaces per SW in MLAG
auto bond-cz21010n3x
iface bond-cz21010n3x
    bond-slaves swp14s0 swp14s1
    bridge-vids 188 189 388 389
    clag-id 46
    mtu 9216

# PO to - ILOCZ21010KJD - Two Interfaces per SW in MLAG
auto bond-cz21010kjd
iface bond-cz21010kjd
    bond-slaves swp14s2 swp14s3
    bridge-vids 188 189 388 389
    clag-id 47
    mtu 9216

# PO to - ILOCZ21010KJM - Two Interfaces per SW in MLAG
auto bond-cz21010kjm
iface bond-cz21010kjm
    bond-slaves swp15s0 swp15s1
    bridge-vids 188 189 388 389
    clag-id 48
    mtu 9216

# PO to - ILOCZ21010N41 - Two Interfaces per SW in MLAG
auto bond-cz21010n41
iface bond-cz21010n41
    bond-slaves swp15s2 swp15s3
    bridge-vids 188 189 388 389
    clag-id 49
    mtu 9216

# PO to - ILOCZ21010N3Z - Two Interfaces per SW in MLAG
auto bond-cz21010n3z
iface bond-cz21010n3z
    bond-slaves swp16s0 swp16s1
    bridge-vids 188 189 388 389
    clag-id 50
    mtu 9216

# PO to - ILOCZ21010KKQ - Two Interfaces per SW in MLAG
auto bond-cz21010kkq
iface bond-cz21010kkq
    bond-slaves swp16s2 swp16s3
    bridge-vids 188 189 388 389
    clag-id 51
    mtu 9216

# PO to - ILOCZ21010N3R - Two Interfaces per SW in MLAG
auto bond-cz21010n3r
iface bond-cz21010n3r
    bond-slaves swp17s0 swp17s1
    bridge-vids 188 189 388 389
    clag-id 52
    mtu 9216

# PO to - ILOCZ21010KJQ - Two Interfaces per SW in MLAG
auto bond-cz21010kjq
iface bond-cz21010kjq
    bond-slaves swp17s2 swp17s3
    bridge-vids 188 189 388 389
    clag-id 53
    mtu 9216

# PO to - ILOCZ21010KJ8 - Two Interfaces per SW in MLAG
auto bond-cz21010kj8
iface bond-cz21010kj8
    bond-slaves swp18s0 swp18s1
    bridge-vids 188 189 388 389
    clag-id 54
    mtu 9216

# PO to - ILOCZ21010N3W - Two Interfaces per SW in MLAG
auto bond-cz21010n3w
iface bond-cz21010n3w
    bond-slaves swp18s2 swp18s3
    bridge-vids 188 189 388 389
    clag-id 55
    mtu 9216

# PO to - ILOCZ21010N2X - Two Interfaces per SW in MLAG
auto bond-cz21010n2x
iface bond-cz21010n2x
    bond-slaves swp19s0 swp19s1
    bridge-vids 188 189 388 389
    clag-id 56
    mtu 9216

# PO to - ILOCZ21010KJN - Two Interfaces per SW in MLAG
auto bond-cz21010kjn
iface bond-cz21010kjn
    bond-slaves swp19s2 swp19s3
    bridge-vids 188 189 388 389
    clag-id 57
    mtu 9216

#Brigde interface (All L2 Interfaces)
auto bridge
iface bridge
    bridge-ports peerlink bond-hp-m0-dev bond-hp-m1-dev bond-hp-m1-prod bond-hp-m2-dev bond-hp-m3-dev bond-mer-mer swp5 swp6 swp9 swp10 swp28 swp29 bond-cz21010kjh bond-cz21010kkk bond-cz21010n3v bond-cz21010kk8 bond-cz21010n33 bond-cz21010kl3 bond-cz21010n3x bond-cz21010kjd bond-cz21010kjm bond-cz21010n41 bond-cz21010n3z bond-cz21010kkq bond-cz21010n3r bond-cz21010kjq bond-cz21010kj8 bond-cz21010n3w bond-cz21010n2x bond-cz21010kjn
    bridge-vids 2 88 89 188 189 288 289 388 389 1000 2000
    bridge-vlan-aware yes
    mstpctl-treeprio 32768
    bridge-bridgeprio 32768 
    mtu 9216

#PeerLink bond for MLAG setup
auto peerlink
iface peerlink
    bond-slaves swp1 swp2
    mtu 9216

auto peerlink.4094
iface peerlink.4094
    clagd-peer-ip linklocal
    clagd-backup-ip {{ clagd_backup_ip }}
    clagd-priority {{ clagd_priority }}
    clagd-sys-mac 44:38:39:FF:01:01

auto prod
iface prod
    vrf-table auto

#This is an standard vlan created for CLAG-Backup LINK
auto vlan2
iface vlan2
   address {{ vlan_2_address }}
   vlan-id 2
   vlan-raw-device bridge
   mtu 9216

#DEV- VLAN in use to PEER with Main Network - VRF internal
auto vlan88
iface vlan88
    address {{ vlan_88_address }}
    vlan-id 88
    vlan-raw-device bridge
    vrf dev
    mtu 9216

#PROD- VLAN in use to PEER with Main Network - VRF internal
auto vlan89
iface vlan89
    address {{ vlan_89_address }}
    vlan-id 89
    vlan-raw-device bridge
    vrf prod
    mtu 9216

#DEV Internal VLAN - where the nodes live
auto vlan188
iface vlan188
    address {{ vlan_188_address }}
    address-virtual 00:00:5E:00:01:01 10.88.0.1/24
    vlan-id 188
    vlan-raw-device bridge
    vrf dev
    mtu 9216

#PROD Internal VLAN - where the nodes live
auto vlan189
iface vlan189
    address {{ vlan_189_address }}
    address-virtual 00:00:5E:00:01:01 10.89.0.1/24
    vlan-id 189
    vlan-raw-device bridge
    vrf prod
    mtu 9216

#DEV VLAN in use to PEER with Main Network - VRF Public
auto vlan288
iface vlan288
    address {{ vlan_288_address }}
    vlan-id 288
    vlan-raw-device bridge
    vrf dev
    mtu 9216

#PROD VLAN in use to PEER with Main Network - VRF Public
auto vlan289
iface vlan289
    address {{ vlan_289_address }}
    vlan-id 289
    vlan-raw-device bridge
    vrf prod
    mtu 9216

#DEV VLAN in use for public ip addresses - VRF Public
auto vlan388
iface vlan388
    address {{ vlan_388_address }}
    address-virtual 00:00:5E:00:01:02 85.91.50.254/28
    vlan-id 388
    vlan-raw-device bridge
    vrf dev
    mtu 9216

#PROD VLAN in use for public ip addresses - VRF Public
auto vlan389
iface vlan389
    address {{ vlan_389_address }}
    address-virtual 00:00:5E:00:01:02 85.91.53.254/28
    vlan-id 389
    vlan-raw-device bridge
    vrf prod
    mtu 9216

#PROD Vlan in use for NETAPP (Storage)
auto vlan1000
iface vlan1000
   address {{ vlan_1000_address }}
   address-virtual 00:00:5E:00:01:04 10.10.50.1/24
   vlan-id 1000
   vlan-raw-device bridge
   vrf prod
   mtu 9216

#DEV Vlan in use for NETAPP (Storage)
auto vlan2000
iface vlan2000
   address {{ vlan_2000_address }}
   address-virtual 00:00:5E:00:01:04 10.20.50.1/24
   vlan-id 2000
   vlan-raw-device bridge
   vrf dev
   mtu 9216
